{"ts":1373134326927,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"require 'rubygems'\nrequire 'bundler'\nBundler.require\nrequire 'faye'\n\nrequire File.expand_path('../config/initializers/faye_token.rb', __FILE__)\n\nclass ServerAuth\n  def incoming(message, callback)\n    if message['channel'] !~ %r{^/meta/}\n      if message['ext']['auth_token'] != FAYE_TOKEN\n        message['error'] = 'Invalid authentication token'\n      end\n    end\n    callback.call(message)\n  end\nend\n\nfaye_server = Faye::RackAdapter.new(:mount => '/faye', :timeout => 45)\nfaye_server.add_extension(ServerAuth.new)\nrun faye_server\n"]],"start1":0,"start2":0,"length1":0,"length2":532}]],"length":532}
